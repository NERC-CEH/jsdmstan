<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Posterior predictive checks for jsdmStanFit objects — pp_check.jsdmStanFit • jsdmstan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Montserrat-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Posterior predictive checks for jsdmStanFit objects — pp_check.jsdmStanFit"><meta name="description" content="This function acts as an interface to bayesplot::pp_check(), by default
calculating summary statistics for each site (i.e. row in the response matrix)
which are then plotted and compared to the data used to fit the model."><meta property="og:description" content="This function acts as an interface to bayesplot::pp_check(), by default
calculating summary statistics for each site (i.e. row in the response matrix)
which are then plotted and compared to the data used to fit the model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jsdmstan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/jsdmstan-overview.html">Overview</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Posterior predictive checks for <code>jsdmStanFit</code> objects</h1>

      <div class="d-none name"><code>pp_check.jsdmStanFit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function acts as an interface to <code><a href="https://mc-stan.org/bayesplot/reference/pp_check.html" class="external-link">bayesplot::pp_check()</a></code>, by default
calculating summary statistics for each site (i.e. row in the response matrix)
which are then plotted and compared to the data used to fit the model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'jsdmStanFit'</span></span>
<span><span class="fu">pp_check</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  plotfun <span class="op">=</span> <span class="st">"dens_overlay"</span>,</span>
<span>  species <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sites <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summary_stat <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>  calc_over <span class="op">=</span> <span class="st">"site"</span>,</span>
<span>  ndraws <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object of class <code>jsdmStanFit</code></p></dd>


<dt id="arg-plotfun">plotfun<a class="anchor" aria-label="anchor" href="#arg-plotfun"></a></dt>
<dd><p>The ppc plot function to use, given as a character string. The
default is to call <a href="https://mc-stan.org/bayesplot/reference/PPC-distributions.html" class="external-link">ppc_dens_overlay</a>. Can be
specified as either the entire name of function as a character string or without
the ppc_ prefix. If <code>plotfun == "pairs"</code> then a pairs plot is produced with
a diagonal of density plots for the selected species, the upper triangle showing
the recovery of the correlation between the selected species, and the lower
triangle showing the plotted relationships between the species in the data and
one draw of the posterior prediction.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Which species to include in the summary statistic, by default all</p></dd>


<dt id="arg-sites">sites<a class="anchor" aria-label="anchor" href="#arg-sites"></a></dt>
<dd><p>Which sites to include in the summary statistic, by default all</p></dd>


<dt id="arg-summary-stat">summary_stat<a class="anchor" aria-label="anchor" href="#arg-summary-stat"></a></dt>
<dd><p>The summary statistic to be used, by default <code>sum</code> but
any function can be used.</p></dd>


<dt id="arg-calc-over">calc_over<a class="anchor" aria-label="anchor" href="#arg-calc-over"></a></dt>
<dd><p>Whether to calculate the summary statistic by site or species, by
default <code>species</code></p></dd>


<dt id="arg-ndraws">ndraws<a class="anchor" aria-label="anchor" href="#arg-ndraws"></a></dt>
<dd><p>Number of draws, by default the number of samples in the
posterior. Will be sampled randomly from the chains if fewer than the
number of samples.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="jsdm_statsummary.html">jsdm_statsummary()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object that can be further customised using the <span class="pkg">ggplot2</span>
package.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes a <code>jsdmStanFit</code> object and tries to extract statistics
that can give useful summaries within a posterior prediction (or retrodiction)
using the <code><a href="https://mc-stan.org/bayesplot/reference/pp_check.html" class="external-link">bayesplot::pp_check()</a></code> function. It uses the <code><a href="jsdm_statsummary.html">jsdm_statsummary()</a></code>
function to get summary statistics and then supplies them to the specified
<code>ppc_</code> function from the <span class="pkg">bayesplot</span> package. For a full list of
available plotting functions call <code><a href="https://mc-stan.org/bayesplot/reference/available_ppc.html" class="external-link">bayesplot::available_ppc()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># First simulate data and fit the jsdmStan model:</span></span></span>
<span class="r-in"><span><span class="va">mglmm_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="jsdm_sim_data.html">mglmm_sim_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  N <span class="op">=</span> <span class="fl">100</span>, S <span class="op">=</span> <span class="fl">10</span>, K <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="st">"gaussian"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mglmm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="stan_mglmm.html">stan_mglmm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Y <span class="op">=</span> <span class="va">mglmm_data</span><span class="op">$</span><span class="va">Y</span>, X <span class="op">=</span> <span class="va">mglmm_data</span><span class="op">$</span><span class="va">X</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="st">"gaussian"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The default is to plot a density overlay:</span></span></span>
<span class="r-in"><span><span class="fu">pp_check</span><span class="op">(</span><span class="va">mglmm_fit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other plot functions can be called, such as a ribbon plot:</span></span></span>
<span class="r-in"><span><span class="fu">pp_check</span><span class="op">(</span><span class="va">mglmm_fit</span>, plotfun <span class="op">=</span> <span class="st">"ribbon"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Instead of calculating the sum over sites other statistics can be calculated,</span></span></span>
<span class="r-in"><span><span class="co"># e.g. the mean of each species:</span></span></span>
<span class="r-in"><span><span class="fu">pp_check</span><span class="op">(</span><span class="va">mglmm_fit</span>,</span></span>
<span class="r-in"><span>  plotfun <span class="op">=</span> <span class="st">"ecdf_overlay"</span>, summary_stat <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>  calc_over <span class="op">=</span> <span class="st">"species"</span>, ndraws <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A pairs plot - limiting to only a subset of species for graphical simplicity</span></span></span>
<span class="r-in"><span><span class="fu">pp_check</span><span class="op">(</span><span class="va">mglmm_fit</span>, plotfun <span class="op">=</span> <span class="st">"pairs"</span>, species <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fiona Seaton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

